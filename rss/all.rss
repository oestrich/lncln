<? 
/**
 * all.rss
 * 
 * Displays every image on lncln
 *
 * @copyright (C) 2009 Eric Oestrich
 * @version 0.11.0 $Id$
 * @license license.txt GNU General Public License version 3
 * 
 * @package lncln
 */

header('Content-type: text/xml'); 

require_once("../load.php");

$lncln->rss(array("all"));
$lncln->img();

$server = "http://" . $_SERVER['SERVER_NAME'] . str_replace("rss/all.rss", "", $_SERVER['SCRIPT_NAME']);

?>
<rss version="2.0">
<channel>

<title>The Archive</title>
<link><?echo $server;?></link>
<description>All Images</description>
<lastBuildDate>Mon, 26 Jan 2009 18:37:00 EST</lastBuildDate>
<language>en-us</language>

<?
foreach($lncln->images as $image){
	$tags = join(', ', $image['tags']);
	if($tags == ""){
		$tags = "None.";
	}
?>
	<item>
		<title><?echo $image['id'];?></title>
		<link><?echo $server;?>image.php?img=<?echo $image['id'];?></link>
		<guid><?echo $server;?>image.php?img=<?echo $image['id'];?></guid>
		<pubDate><?echo date('r', $image['postTime']);?></pubDate>
		<description><![CDATA[ <img src="<?echo $server;?>images/index/<?echo $image['id'] . "." . $image['type']?>" alt="<?echo $image['id'];?>"/> <br />
		<a href="<?echo $server;?>images/full/<?echo $image['id'] . "." . $image['type']?>" />Larger</a><br />
		<?echo $image['caption'];?><br />
		Tags: <?echo $tags;?>
		]]></description>
	</item>
<?
}
?>

</channel>
</rss>